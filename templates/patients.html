 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Patient Records - Kit & Dom's Dental Clinic</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../static/css/patients.css">
</head>
<body data-role="manager">

  <!-- Header -->
  <header class="header" role="banner">
    <div class="header-left">
      <button class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Toggle sidebar navigation" aria-expanded="true">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
      <div class="header-logo" role="img" aria-label="Dental clinic logo">ðŸ¦·</div>
      <h1 class="header-title">Kit &amp; Dom's Dental Clinic â€” Patient Records</h1>
    </div>

    <div class="search-container" id="globalSearchWrap">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <input id="globalSearch" class="search-input" placeholder="Search patient name, ID, or contact..." />
    </div>

    <div class="header-right">
      <div class="role-switcher" role="group" aria-label="Role selection">
        <button id="managerBtn" class="role-switch-btn active" onclick="switchRole('manager')" aria-pressed="true">Manager</button>
        <button id="staffBtn" class="role-switch-btn" onclick="switchRole('staff')" aria-pressed="false">Staff</button>
      </div>

      <button class="user-trigger" onclick="toggleUserMenu()" aria-label="Open user menu" aria-haspopup="true">
        <div class="user-avatar" id="userAvatar" aria-hidden="true">MS</div>
        <div>
          <div class="user-name" id="userName">Dr. Maria Santos</div>
          <div class="user-role" id="userRole">Manager / Dentist</div>
        </div>
      </button>
    </div>
  </header>

  <!-- Sidebar -->
  <nav id="sidebar" class="sidebar" role="navigation" aria-label="Main navigation">
    <div class="sidebar-item" onclick="navigateTo('dashboard')" data-tooltip="Dashboard">
      <!-- Lucide: home -->
      <svg viewBox="0 0 24 24" fill="none" stroke="#64748B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
        <path d="M3 9.5L12 3l9 6.5"></path>
        <path d="M9 22V12h6v10"></path>
      </svg>
      <span class="sidebar-label">Dashboard</span>
    </div>

    <div class="sidebar-item active" onclick="navigateTo('patients')" data-tooltip="Patients">
      <!-- Lucide: users -->
      <svg viewBox="0 0 24 24" fill="none" stroke="#64748B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
      </svg>
      <span class="sidebar-label">Patients</span>
    </div>

    <div class="sidebar-item manager-only" onclick="navigateTo('team')" data-tooltip="Team Management">
      <!-- Lucide: user-check -->
      <svg viewBox="0 0 24 24" fill="none" stroke="#64748B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="8.5" cy="7" r="4"></circle>
        <path d="M17 11l2 2 4-4"></path>
      </svg>
      <span class="sidebar-label">Team Management</span>
    </div>

    <div class="sidebar-item manager-only" onclick="navigateTo('logs')" data-tooltip="Audit Logs">
      <!-- Lucide: list -->
      <svg viewBox="0 0 24 24" fill="none" stroke="#64748B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
        <line x1="8" y1="6" x2="21" y2="6"></line>
        <line x1="8" y1="12" x2="21" y2="12"></line>
        <line x1="8" y1="18" x2="21" y2="18"></line>
        <line x1="3" y1="6" x2="3.01" y2="6"></line>
        <line x1="3" y1="12" x2="3.01" y2="12"></line>
        <line x1="3" y1="18" x2="3.01" y2="18"></line>
      </svg>
      <span class="sidebar-label">Audit Logs</span>
    </div>

    <div class="sidebar-item manager-only" onclick="navigateTo('backup')" data-tooltip="Backup & Restore">
      <!-- Lucide: database -->
      <svg viewBox="0 0 24 24" fill="none" stroke="#64748B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
        <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
        <path d="M3 5v6c0 1.7 4 3 9 3s9-1.3 9-3V5"></path>
        <path d="M3 12v6c0 1.7 4 3 9 3s9-1.3 9-3v-6"></path>
      </svg>
      <span class="sidebar-label">Backup & Restore</span>
    </div>

    <div class="sidebar-item" onclick="navigateTo('settings')" data-tooltip="Account Settings">
      <!-- Lucide: settings -->
      <svg viewBox="0 0 24 24" fill="none" stroke="#64748B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82L4.3 4.3A2 2 0 0 1 7.12 1.47l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09c.1.6.55 1.12 1.17 1.39l.06.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c.43.2.83.5 1.17.87z"></path>
      </svg>
      <span class="sidebar-label">Account Settings</span>
    </div>
  </nav>

  <!-- Main content -->
  <main id="mainContent" class="main-content" role="main">
    <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div style="flex:1;min-width:420px">
        <div class="page-title">Patient Records</div>
        <div class="page-sub">Manage and view registered patient information. Use filters to narrow results.</div>
      </div>

      <div style="display:flex;align-items:center;gap:12px">
        <div class="muted">Showing <span id="recordsCount">â€”</span> patients</div>
      </div>
    </div>

    <!-- Action row -->
    <div class="action-row" style="margin-top:12px" role="toolbar" aria-label="Patient management actions">
      <div class="left-actions">
        <button class="primary-btn" id="btnAddPatient" onclick="openAddModal()" aria-label="Add new patient record">+ Add New Patient</button>
        <button class="secondary-btn manager-only" id="btnExport" onclick="exportCSV()" aria-label="Export patient data to CSV">Export (CSV)</button>
        <button class="secondary-btn manager-only" id="btnDeleteSelected" onclick="deleteSelected()" aria-label="Delete selected patients">Delete Selected</button>
      </div>

      <div class="filters" role="search" aria-label="Patient filters">
        <label for="searchInput" class="hidden">Search patients</label>
        <input id="searchInput" class="filter-input" placeholder="Search by name or ID" aria-label="Search by patient name or ID" />
        <label for="genderFilter" class="hidden">Filter by gender</label>
        <select id="genderFilter" class="filter-select" aria-label="Filter by gender">
          <option value="">All genders</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>
        <label for="statusFilter" class="hidden">Filter by status</label>
        <select id="statusFilter" class="filter-select" aria-label="Filter by patient status">
          <option value="">All status</option>
          <option value="active">Active</option>
          <option value="inactive">Inactive</option>
        </select>
        <button class="secondary-btn" onclick="resetFilters()" aria-label="Reset all filters">Reset</button>
      </div>
    </div>

    <!-- Table -->
    <div class="table-card" style="margin-top:18px" role="region" aria-label="Patient records table">
      <div class="table-header">
        <h2 style="font-weight:600;font-size:16px;margin:0">All Patients</h2>
        <div class="muted">Quick actions available</div>
      </div>

      <div class="table-wrapper">
        <table id="patientsTable" aria-label="Patient records">
          <!-- rendered by JS -->
        </table>
      </div>
    </div>

    <!-- Footer -->
    <div style="height:72px"></div>
  </main>

  <footer class="footer" role="contentinfo">Â© 2025 Kit &amp; Dom's Dental Clinic | Version 1.1</footer>

  <!-- Modals -->
  <div id="modalBackdrop" class="modal-backdrop" onclick="closeModal(event)" role="dialog" aria-modal="true" aria-labelledby="modalTitle" style="display:none">
    <div id="modal" class="modal" onclick="event.stopPropagation()" role="document">
      <!-- content injected by JS -->
    </div>
  </div>

<script src="../static/js/patients.js"></script>
</body>
</html>